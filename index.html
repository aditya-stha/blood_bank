<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blood Donor List</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
  body { padding: 15px; font-family: Arial, sans-serif; background: #f9f9f9; }
  .donor-card { margin-bottom: 15px; }
</style>
</head>
<body>

<div class="container">
  <h1 class="mb-3 text-center">Blood Donor List</h1>
  <div id="results"></div>
</div>

<script>
const sheetId = '1chtXAs6oxwn_3dgUFbW-_qD7tvD4_M_9j0qBk_uN6zc
'; // replace with your sheet ID
const sheetName = 'Sheet1'; // replace with your tab name
let bloodData = [];

// Fetch Google Sheet as JSON
fetch(`https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json&sheet=${sheetName}`)
  .then(res => res.text())
  .then(rep => {
    const json = JSON.parse(rep.substring(47).slice(0, -2));
    bloodData = json.table.rows.map(r => ({
      Name: r.c[0]?.v || '',
      Phone: r.c[1]?.v || '',
      BloodType: r.c[2]?.v || ''
    }));
    console.log('Loaded data:', bloodData);
    showAll();
  });

function showAll() {
  const resultsDiv = document.getElementById('results');
  resultsDiv.innerHTML = '';

  if (bloodData.length === 0) {
    resultsDiv.innerHTML = '<p class="text-center">No donors found.</p>';
    return;
  }

  bloodData.forEach(d => {
    const card = document.createElement('div');
    card.className = 'card donor-card p-3 shadow-sm';
    card.innerHTML = `
      <h5>${d.Name} <span>${d.BloodType}</span></h5>
      <p>Phone: <a href="tel:${d.Phone}">${d.Phone}</a></p>
    `;
    resultsDiv.appendChild(card);
  });
}
</script>

</body>
</html>
